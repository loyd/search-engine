\chapter{Аналитический раздел}
Поисковая система состоит из двух основных компонентов: поискового робота, осуществляющего сбор данных в сети Интернет, и поисковика, осуществляющего поиск по индексу релевантных запросу документов и их ранжирование.

Поисковой робот (рис. \ref{fig:collecting-a0}) находит страницы в сети, используя ссылки с уже проиндексированных страниц. Начальный набор страниц задаётся пользователем, как и конфигурация робота (глубина обхода и другие).

\begin{figure}[h]
  \centering
  \includegraphics[width=.7\linewidth]{collecting-a0.pdf}
  \caption{IDEF0-A0 поискового робота.}
  \label{fig:collecting-a0}
\end{figure}

\begin{figure}[h]
  \centering
  \includegraphics[width=.9\linewidth]{collecting-a1.pdf}
  \caption{IDEF0-A1 поискового робота.}
  \label{fig:collecting-a1}
\end{figure}

Для достижения своей цели поисковому роботу необходимо получить страницу (стек TCP/IP), выделить основное содержимое, разобрать его на слова, выделив основу слова (стемминг), после чего сохранить в БД в форме, удобной для дальнейшего поиска (рис. \ref{fig:collecting-a1}).

Поисковик (рис. \ref{fig:ranking-a0}) по заданному запросу находит все релевантные документы в собранном индексе и возвращает пользователю отсортированный набор документов, соответствующих запросу.

\begin{figure}[h]
  \centering
  \includegraphics[width=.7\linewidth]{ranking-a0.pdf}
  \caption{IDEF0-A0 поисковика.}
  \label{fig:ranking-a0}
\end{figure}

Поскольку именно поиск документов является главной целью, система должна разрабатываться с учётом тех характеристик документов, которые участвуют в ранжировании, так как от этого зависит способ сбора и хранения данных.

Перед проектированием базы данных необходимо рассмотреть предметную область (рис.~\ref{fig:er}). В целом предметная область определяется через две основные сущности: страницу и слово. Страницы могут ссылаться друг на друга посредством гиперссылок, в тексте которых содержатся определённые слова.

Краткое описание атрибутов:
\begin{enumerate}
  \item URL~--- адрес страницы;
  \item Ключ~--- агрессивно нормализованный адрес URL (см.~\ref{sssec:url-normalization});
  \item PR~--- рейтинг страницы (см.~\ref{sssec:pagerank});
  \item Заголовок~--- совокупность содержимого всех заголовков на странице;
  \item Длина в словах~--- количество слов в странице;
  \item Основа~--- нормализованная форма слова (см.~\ref{sssec:stemming});
  \item Встречаемость~--- количество страниц, включающих данное слово;
  \item IDF~--- производная от встречаемости характеристика (см.~\ref{sssec:tf-idf});
  \item Количество~--- количество определённого слова в странице;
  \item Положение~--- смещение первого вхождения слова (см.~\ref{sssec:position});
  \item TF~--- частота вхождения слова (см.~\ref{sssec:tf-idf});
  \item BM25~--- производная характеристика TF и IDF (см.~\ref{sssec:bm25});
\end{enumerate}

\begin{figure}[h]
  \centering
  \includegraphics[width=\linewidth]{er.pdf}
  \caption{Концептуальная схема предметной области.}
  \label{fig:er}
\end{figure}

Производные атрибуты (TF, IDF, BM25, ...) рассматриваются далее в этом разделе, как и причины их возникновения.

\input{21-ranking}
\input{22-collecting}
